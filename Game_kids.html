<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover" />
<title>Game Kids</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap" rel="stylesheet">
<style>
html, body { margin: 0; padding: 0; height: 100%; font-family: 'Luckiest Guy', cursive; background: #fff; overflow: hidden; touch-action: none; }
.no-select { user-select: none; -webkit-user-select: none; }
.screen { display: none; width: 100%; height: 100%; justify-content: center; align-items: center; flex-direction: column; }
.screen.active { display: flex; }
.big-btn { font-size: 24px; padding: 20px 40px; border: none; border-radius: 16px; background-color: #007AFF; color: white; cursor: pointer; }
</style>
</head>
<body class="no-select">

<!-- Splash Screen -->
<div id="splashScreen" class="screen active" style="background:#fff;">
    <img src="icon.png" alt="Logo Game" style="width:200px;max-width:60%;">
</div>

<!-- Main Menu -->
<div id="mainMenuScreen" class="screen">
    <div class="menu-content" style="display:flex;flex-direction:column;gap:10px;align-items:center;">
      <div id="highScoreDisplay">Skor Tertinggi: 0</div>
      <button id="modeBtn" class="big-btn">Pilih Mode</button>
      <div id="modeSelectionDisplay"></div>
      <button id="levelBtn" class="big-btn">Pilih Level</button>
      <div id="levelSelectionDisplay"></div>
      <button id="startBtn" class="big-btn">Mulai</button>
    </div>
</div>

<!-- Game Screen -->
<div id="gameScreen" class="screen">
    <header style="position:absolute;top:0;left:0;width:100%;background:#fff8;display:flex;justify-content:space-between;padding:10px;">
      <div>Skor: <span id="score">0</span></div>
      <button id="backToMenu" class="big-btn" style="font-size:16px;padding:5px 10px;">Menu</button>
    </header>
    <div id="gameArea" style="flex:1;width:100%;height:100%;background:#e0f7fa;position:relative;">
      <canvas id="gameCanvas"></canvas>
      <canvas id="popCanvas"></canvas>
      <div id="target" style="position:absolute;top:60px;left:50%;transform:translateX(-50%);background:red;color:white;padding:10px;border-radius:8px;font-size:32px;">A</div>
    </div>
</div>

<!-- Game Over -->
<div id="gameOverScreen" class="screen">
    <div style="background:white;padding:20px;border-radius:12px;text-align:center;">
        <h2>Game Over</h2>
        <p>Skor Akhir: <span id="finalScore">0</span></p>
        <p>Jawaban Benar: <span id="finalCorrect">0</span></p>
        <button id="ulangiBtn" class="big-btn">Ulangi</button>
        <button id="menuBtn" class="big-btn">Menu</button>
    </div>
</div>

<!-- Audio -->
<audio id="audio_opening" src="openinggame.wav" preload="auto"></audio>
<audio id="audio_bgm" src="latarmusic.mp3" preload="auto" loop></audio>

<script>
// Variabel game
let score = 0, highScore = 0;

// Elemen
const splashScreen = document.getElementById('splashScreen');
const mainMenuScreen = document.getElementById('mainMenuScreen');
const gameScreen = document.getElementById('gameScreen');
const gameOverScreen = document.getElementById('gameOverScreen');
const scoreEl = document.getElementById('score');
const highScoreEl = document.getElementById('highScoreDisplay');
const finalScoreEl = document.getElementById('finalScore');

// Audio
const audio_opening = document.getElementById('audio_opening');
const audio_bgm = document.getElementById('audio_bgm');

// Splash otomatis ke menu setelah musik opening
window.addEventListener('load', () => {
    setTimeout(() => {
        audio_opening.play().catch(()=>{});
        audio_opening.onended = () => {
            splashScreen.classList.remove('active');
            mainMenuScreen.classList.add('active');
        };
    }, 500);
});

// Mulai game
document.getElementById('startBtn').addEventListener('click', () => {
    mainMenuScreen.classList.remove('active');
    gameScreen.classList.add('active');
    score = 0;
    scoreEl.textContent = score;
    audio_bgm.play().catch(()=>{});
});

// Ulangi game
document.getElementById('ulangiBtn').addEventListener('click', () => {
    gameOverScreen.classList.remove('active');
    gameScreen.classList.add('active');
    score = 0;
    scoreEl.textContent = score;
    audio_bgm.play().catch(()=>{});
});

// Kembali ke menu
document.getElementById('menuBtn').addEventListener('click', () => {
    gameOverScreen.classList.remove('active');
    mainMenuScreen.classList.add('active');
});

// Back dari game ke menu
document.getElementById('backToMenu').addEventListener('click', () => {
    gameScreen.classList.remove('active');
    mainMenuScreen.classList.add('active');
});
</script>
</body>
</html>